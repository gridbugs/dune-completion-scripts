# Dune Completion Scripts

Bash completion scripts for [Dune](https://github.com/ocaml/dune).

## Installation

The file `bash.sh` contains the bash completion script. Source it in your shell
to add completion suggestions for Dune to your current session. The easiest way
to enable this all the time is to source the file from your shell rc file.

### Bash

Add the following to your `~/.bashrc`:

```bash
source /path/to/dune-completion-scripts/bash.sh
```

### Zsh

Zsh understands bash completion scripts but support must be explicitly enabled.
Add the following to your `~/.zshrc`:

```zsh
autoload -Uz compinit bashcompinit
compinit
bashcompinit

source /path/to/dune-completion-scripts/bash.sh
```

## How to generate

These scripts were generated by modifying Dune to parse command line arguments
using the library [climate](https://github.com/gridbugs/climate) - a library
with similar semantics to cmdliner but with the ability to generate completion
scripts. This modified version of dune lives on [this
branch](https://github.com/gridbugs/dune/tree/climate).

Build dune from that branch and then run the following to print the bash
completion script to stdout:
```
dune.exe internal print-completion-script-bash \
  --program-name=dune \
  --program-exe-for-reentrant-query=dune \
  --global-symbol-prefix=_dune_ \
  --no-command-hash-in-function-names
```
